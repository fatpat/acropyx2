(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{6130:function(n,e,t){"use strict";var r=t(4836);e.Z=void 0;var i=r(t(4938)),s=t(5893),c=(0,i.default)((0,s.jsx)("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),"List");e.Z=c},1659:function(n,e,t){"use strict";var r=t(4836);e.Z=void 0;var i=r(t(4938)),s=t(5893),c=(0,i.default)((0,s.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore");e.Z=c},7958:function(n,e,t){"use strict";var r=t(4836);e.Z=void 0;var i=r(t(4938)),s=t(5893),c=(0,i.default)((0,s.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");e.Z=c},5846:function(n,e,t){"use strict";var r=t(4836);e.Z=void 0;var i=r(t(4938)),s=t(5893),c=(0,i.default)((0,s.jsx)("path",{d:"M12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm-3.48.94C8.04 17.55 7 16.76 7 14H5c0 2.7.93 4.41 2.3 5.5.5.4 1.1.7 1.7.9V24h6v-3.6c.6-.2 1.2-.5 1.7-.9 1.37-1.09 2.3-2.8 2.3-5.5h-2c0 2.76-1.04 3.55-1.52 3.94C14.68 18.54 14 19 12 19s-2.68-.46-3.48-1.06zM12 0C5.92 0 1 1.9 1 4.25v3.49c0 .81.88 1.26 1.56.83.14-.09.28-.18.44-.26L5 13h2l1.5-6.28c1.1-.14 2.28-.22 3.5-.22s2.4.08 3.5.22L17 13h2l2-4.69c.16.09.3.17.44.26.68.43 1.56-.02 1.56-.83V4.25C23 1.9 18.08 0 12 0zM5.88 11.24 4.37 7.69c.75-.28 1.6-.52 2.53-.71l-1.02 4.26zm12.24 0L17.1 6.98c.93.19 1.78.43 2.53.71l-1.51 3.55z"}),"Paragliding");e.Z=c},454:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/competitions/run",function(){return t(1734)}])},1734:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Xn}});var r=t(8520),i=t.n(r),s=t(5893),c=t(7294),a=t(1163),o=t(4713),l=t(9072),u=t(9630),d=t(5084),h=t(1849),x=t(6070),f=t(1953),p=t(9837),j=t(8346),v=t(1359),m=t(8769),Z=t(5050),g=t(5670),y=t(7074),k=t(8661),b=t(1395),w=t(1300),P=t(594),_=t(7440),C=t(3911),S=t(984),O=t(4229),T=t(5089),N=t(2563),I=t(5846),L=t(6130),R=t(9807),E=t(5605),A=t(9417),z=t(3978),X=t(244),J=t(6777),H=(t(4803),t(4117),t(7497),t(9780),t(5148)),M=t(9233),D=(t(1194),t(3521),t(7250),t(3740),t(4451)),F=t(3798),B=t(8321),W=t(4906),V=t(6786),q=t(1736),G=t(918),K=t(562),Q=t(7971),U=t(7958),Y=t(1659),$=t(2844),nn=t(7462),en=t(3366),tn=t(6010),rn=t(4780),sn=t(4127),cn=t(6594),an=t(9711),on=t(9700),ln=t(6866),un=t(8884),dn=t(7133);const hn=["className","children","classes","IconComponent","input","inputProps","variant"],xn=["root"],fn=(0,s.jsx)(ln.Z,{}),pn=c.forwardRef((function(n,e){const t=(0,un.Z)({name:"MuiNativeSelect",props:n}),{className:r,children:i,classes:a={},IconComponent:o=on.Z,input:l=fn,inputProps:u}=t,d=(0,en.Z)(t,hn),h=(0,an.Z)(),x=(0,cn.Z)({props:t,muiFormControl:h,states:["variant"]}),f=(n=>{const{classes:e}=n;return(0,rn.Z)({root:["root"]},dn.f,e)})((0,nn.Z)({},t,{classes:a})),p=(0,en.Z)(a,xn);return(0,s.jsx)(c.Fragment,{children:c.cloneElement(l,(0,nn.Z)({inputComponent:sn.ZP,inputProps:(0,nn.Z)({children:i,classes:p,IconComponent:o,variant:x.variant,type:void 0},u,l?l.props.inputProps:{}),ref:e},d,{className:(0,tn.Z)(f.root,l.props.className,r)}))})}));pn.muiName="Select";var jn=pn;function vn(n,e,t,r,i,s,c){try{var a=n[s](c),o=a.value}catch(l){return void t(l)}a.done?e(o):Promise.resolve(o).then(r,i)}function mn(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var s=n.apply(e,t);function c(n){vn(s,r,i,c,a,"next",n)}function a(n){vn(s,r,i,c,a,"throw",n)}c(void 0)}))}}function Zn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){Zn(n,e,t[e])}))}return n}function yn(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],r=!0,i=!1,s=void 0;try{for(var c,a=n[Symbol.iterator]();!(r=(c=a.next()).done)&&(t.push(c.value),!e||t.length!==e);r=!0);}catch(o){i=!0,s=o}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var kn=function(n){return(0,s.jsx)(jn,{onChange:function(e){n.onChange(e)},children:Array.from({length:21},(function(n,e){return.5*e})).map((function(e){return(0,s.jsx)("option",{value:e,selected:n.value==e,children:e})}))})},bn=function(n){var e,t,r,a,o,h,p,j,m,Z,g=n.comp,y=n.run,k=n.rid,b=yn((0,H.z)(),4),w=b[0],P=(b[1],b[2],b[3]),_=(0,c.useState)(null),C=_[0],S=_[1],O=(0,c.useState)(0),T=O[0],N=O[1],I=(0,c.useState)(null),L=I[0],D=I[1],F=(0,c.useState)({tricks:[],marks:[],did_not_start:!1,warnings:[]}),B=F[0],W=F[1],V=(0,c.useState)({judges_mark:{}}),q=V[0],nn=V[1],en=yn((0,M.fR)(g.type),1)[0],tn=(0,c.useState)(!1),rn=tn[0],sn=tn[1],cn=((0,c.useRef)(),mn(i().mark((function n(e){var t,r,s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e<0||e>=y.pilots.length)){n.next=2;break}return n.abrupt("return");case 2:return T=e,L=y.pilots[T],S("Loading flight for ".concat(L.name)),n.t0=yn,n.next=8,(0,M.Xv)("/competitions/".concat(g.code,"/runs/").concat(k,"/flights/").concat(L.civlid),{expected_status:[200,404]});case 8:if(n.t1=n.sent,t=(0,n.t0)(n.t1,4),r=t[0],s=t[1],t[2],c=t[3],!r){n.next=18;break}return console.log("error while fetching flight: ".concat(r)),S(null),n.abrupt("return");case 18:404==c?(B={marks:[],tricks:[]},q={judges_mark:{}},rn=!1):(B=s,q=s.final_marks,rn=!0),console.log("retrieved Data",B),W(B),nn(q),sn(rn),D(L),N(T),S(null);case 26:case"end":return n.stop()}}),n)})))),an=mn(i().mark((function n(e){var t,r,s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={tricks:e.tricks.filter((function(n){return null!=n})).map((function(n){return n.name})),marks:e.marks,did_not_start:e.did_not_start,warnings:e.warnings},n.t0=yn,n.next=4,(0,M.Xv)("/competitions/".concat(g.code,"/runs/").concat(k,"/flights/").concat(L.civlid,"/new?save=",!1),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if(n.t1=n.sent,r=(0,n.t0)(n.t1,3),s=r[0],c=r[1],r[2],!s){n.next=14;break}return console.log("error while simlating score: ".concat(s)),nn({judges_mark:{}}),sn(!1),n.abrupt("return");case 14:console.log("simulated score:",c),nn(c),sn(!0);case 17:case"end":return n.stop()}}),n)}))),on=function(n,e,t){var r=!0,i=!1,s=void 0;try{for(var c,a=B.marks.entries()[Symbol.iterator]();!(r=(c=a.next()).done);r=!0){var o=yn(c.value,2),l=o[0];o[1];if(B.marks[l].judge==e._id)return B.marks[l][n]=t,W(B),void an(B)}}catch(d){i=!0,s=d}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}var u={judge:e._id};u[n]=t,B.marks.push(u),W(B),an(B)},ln=mn(i().mark((function n(e,t){var r,s,c,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={tricks:B.tricks.filter((function(n){return null!=n})).map((function(n){return n.name})),marks:B.marks,did_not_start:B.did_not_start,warnings:B.warnings},n.t0=yn,n.next=4,(0,M.Xv)("/competitions/".concat(g.code,"/runs/").concat(k,"/flights/").concat(L.civlid,"/new?published=").concat(e,"&save=",!0),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:if(n.t1=n.sent,s=(0,n.t0)(n.t1,3),c=s[0],a=s[1],s[2],!c){n.next=12;break}return P("error while saving score: ".concat(c)),n.abrupt("return");case 12:w("".concat(L.name,"'s flights saved with a ").concat(a.score," score")),0!=t&&cn(T+t);case 14:case"end":return n.stop()}}),n)}))),un=mn(i().mark((function n(e){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm("Are you sure to publish a DNS flight ?")){n.next=2;break}return n.abrupt("return");case 2:B.did_not_start=!0,ln(!0);case 4:case"end":return n.stop()}}),n)})));return(0,c.useEffect)((function(){cn(0)}),[]),C?(0,s.jsxs)(f.Z,{sx:{width:"100%",textAlign:"center"},children:[(0,s.jsx)(x.Z,{}),C]}):(0,s.jsxs)(v.Z,{children:[L&&(0,s.jsxs)(l.ZP,{container:!0,children:[(0,s.jsx)(l.ZP,{item:!0,xs:1,sm:1,children:(0,s.jsx)(K.Z,{onClick:function(){cn(T-1)},children:(0,s.jsx)(Y.Z,{})})}),(0,s.jsx)(l.ZP,{item:!0,xs:10,sm:10,children:(0,s.jsx)($.Z,{id:"autocomplete-pilot",options:y.pilots.sort((function(n,e){return e.rank-n.rank})),value:L,getOptionLabel:function(n){return"".concat(n.name," (").concat(n.civlid,")")},renderInput:function(n){return(0,s.jsx)(Q.Z,gn({},n,{name:"pilot",label:"Pilot"}))},onChange:function(n,e){if(e){var t=!0,r=!1,i=void 0;try{for(var s,c=y.pilots.entries()[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var a=yn(s.value,2),o=a[0];if(a[1].civlid==e.civlid)return void cn(o)}}catch(l){r=!0,i=l}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}}}})}),(0,s.jsx)(l.ZP,{item:!0,xs:1,sm:1,children:(0,s.jsx)(K.Z,{onClick:function(){cn(T+1)},children:(0,s.jsx)(U.Z,{})})})]}),(0,s.jsx)(l.ZP,{container:!0,spacing:2,children:"\xa0"}),(0,s.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,s.jsxs)(l.ZP,{container:!0,xs:6,children:[(0,s.jsx)(l.ZP,{xs:12,children:(0,s.jsx)(u.Z,{variant:"h5",children:"Maneuvers"})}),[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20].map((function(n){var e=null;return B&&B.tricks&&B.tricks[n]&&(e=B.tricks[n]),(0,s.jsx)(l.ZP,{xs:12,children:(0,s.jsx)($.Z,{id:"autocomplete-trick-{i}",options:en,getOptionLabel:function(n){return"".concat(n.name," (").concat(n.acronym,") (").concat(n.technical_coefficient,")")},renderInput:function(n){return(0,s.jsx)(Q.Z,gn({},n,{name:"trick"}))},value:e,onChange:function(e,t){B.tricks[n]=t,an(B),W(B)}},"autocomplete-trick-{i}")},n)}))]}),(0,s.jsxs)(l.ZP,{container:!0,xs:6,children:[(0,s.jsxs)(l.ZP,{container:!0,xs:12,children:[(0,s.jsx)(u.Z,{variant:"h5",children:"Marks"}),(0,s.jsx)(f.Z,{sx:{width:"100%"},children:(0,s.jsx)(G.Z,{sx:{width:"100%",mb:2},children:(0,s.jsx)(J.Z,{children:(0,s.jsxs)(X.Z,{sx:{minWidth:750},children:[(0,s.jsx)(z.Z,{children:(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:"Judge"}),(0,s.jsx)(E.Z,{children:"Technical"}),(0,s.jsx)(E.Z,{children:"Choreography"}),(0,s.jsx)(E.Z,{children:"Landing"})]})}),(0,s.jsx)(R.Z,{children:y.judges.map((function(n){var e=0,t=0,r=0;for(var i in B.marks)if((i=B.marks[i]).judge==n._id){e=i.technical,t=i.choreography,r=i.landing;break}return(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:(0,s.jsx)(u.Z,{children:n.name})}),(0,s.jsx)(E.Z,{children:(0,s.jsx)(kn,{onChange:function(e){on("technical",n,e.target.value)},value:e})}),(0,s.jsx)(E.Z,{children:(0,s.jsx)(kn,{onChange:function(e){on("choreography",n,e.target.value)},value:t})}),(0,s.jsx)(E.Z,{children:(0,s.jsx)(kn,{onChange:function(e){on("landing",n,e.target.value)},value:r})})]})}))})]})})})})]}),(0,s.jsxs)(l.ZP,{container:!0,xs:12,children:[(0,s.jsx)(u.Z,{variant:"h5",children:"Scores"}),(0,s.jsx)(X.Z,{children:(0,s.jsxs)(R.Z,{children:[(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Technicity: ",null!==(e=q.technicity)&&void 0!==e?e:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["% Bonus: ",null!==(t=q.bonus_percentage)&&void 0!==t?t:"","%"]})})]}),(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:(0,s.jsx)(u.Z,{children:"Judge's marks"})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Technical: ",null!==(r=q.judges_mark.technical)&&void 0!==r?r:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Choreography: ",null!==(a=q.judges_mark.choreography)&&void 0!==a?a:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Landing: ",null!==(o=q.judges_mark.landing)&&void 0!==o?o:""]})})]}),(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:(0,s.jsx)(u.Z,{children:"Final's marks"})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Technical: ",null!==(h=q.technical)&&void 0!==h?h:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Choreography: ",null!==(p=q.choreography)&&void 0!==p?p:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Landing: ",null!==(j=q.landing)&&void 0!==j?j:""]})})]}),(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Bonuses: ",null!==(m=q.bonus)&&void 0!==m?m:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{variant:"h5",children:["Final Score: ",null!==(Z=q.score)&&void 0!==Z?Z:""]})})]})]})})]}),(0,s.jsxs)(l.ZP,{container:!0,xs:12,children:[(0,s.jsxs)(l.ZP,{item:!0,xs:4,children:[(0,s.jsx)(d.Z,{variant:"contained",disabled:!rn,onClick:function(n){return ln(!1,0)},children:"Save"}),(0,s.jsx)(d.Z,{variant:"contained",disabled:!rn,onClick:function(n){return ln(!1,1)},children:"Save & Next"})]}),(0,s.jsxs)(l.ZP,{item:!0,xs:4,children:[(0,s.jsx)(d.Z,{variant:"contained",disabled:!rn,onClick:function(n){return ln(!0,0)},children:"Save & Publish"}),(0,s.jsx)(d.Z,{variant:"contained",disabled:!rn,onClick:function(n){return ln(!0,1)},children:"Save & Publish & Next"})]}),(0,s.jsx)(l.ZP,{item:!0,xs:4,children:(0,s.jsx)(d.Z,{onClick:un,children:"Did not start"})})]})]})]})]})};function wn(n,e,t,r,i,s,c){try{var a=n[s](c),o=a.value}catch(l){return void t(l)}a.done?e(o):Promise.resolve(o).then(r,i)}function Pn(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var s=n.apply(e,t);function c(n){wn(s,r,i,c,a,"next",n)}function a(n){wn(s,r,i,c,a,"throw",n)}c(void 0)}))}}function _n(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){_n(n,e,t[e])}))}return n}function Sn(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],r=!0,i=!1,s=void 0;try{for(var c,a=n[Symbol.iterator]();!(r=(c=a.next()).done)&&(t.push(c.value),!e||t.length!==e);r=!0);}catch(o){i=!0,s=o}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var On,Tn=function(n){return(0,s.jsxs)(jn,{onChange:function(e){n.onChange(e)},children:[(0,s.jsx)("option",{value:"",children:"-"}),Array.from({length:21},(function(n,e){return.5*e})).map((function(e){return(0,s.jsx)("option",{value:e,selected:n.value==e,children:e})}))]})},Nn=function(n){var e,t,r,a,o,h,p,j,m,Z,g,y,k=n.comp,b=n.run,w=n.rid,P=Sn((0,H.z)(),4),_=P[0],C=(P[1],P[2],P[3]),S=(0,c.useState)(null),O=S[0],T=S[1],N=(0,c.useState)(0),I=N[0],L=N[1],D=(0,c.useState)(null),F=D[0],B=D[1],W=(0,c.useState)({tricks:[],marks:[],did_not_start:!1,warnings:[]}),V=W[0],q=W[1],nn=(0,c.useState)({judges_mark:{}}),en=nn[0],tn=nn[1],rn=Sn((0,M.fR)(k.type),1)[0],sn=(0,c.useState)(!1),cn=sn[0],an=sn[1],on=((0,c.useRef)(),Pn(i().mark((function n(e){var t,r,s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e<0||e>=b.teams.length)){n.next=2;break}return n.abrupt("return");case 2:return I=e,F=b.teams[I],T("Loading flight for ".concat(F.name)),n.t0=Sn,n.next=8,(0,M.Xv)("/competitions/".concat(k.code,"/runs/").concat(w,"/flights/").concat(F._id),{expected_status:[200,404]});case 8:if(n.t1=n.sent,t=(0,n.t0)(n.t1,4),r=t[0],s=t[1],t[2],c=t[3],!r){n.next=18;break}return console.log("error while fetching flight: ".concat(r)),T(null),n.abrupt("return");case 18:404==c?(V={marks:[],tricks:[]},en={judges_mark:{}},cn=!1):(V=s,en=s.final_marks,cn=!0),console.log("retrieved Data",V),q(V),tn(en),an(cn),B(F),L(I),T(null);case 26:case"end":return n.stop()}}),n)})))),ln=Pn(i().mark((function n(e){var t,r,s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={tricks:e.tricks.filter((function(n){return null!=n})).map((function(n){return n.name})),marks:e.marks,did_no_start:e.did_not_start,warnings:e.warnings},n.t0=Sn,n.next=4,(0,M.Xv)("/competitions/".concat(k.code,"/runs/").concat(w,"/flights/").concat(F._id,"/new?save=",!1),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if(n.t1=n.sent,r=(0,n.t0)(n.t1,3),s=r[0],c=r[1],r[2],!s){n.next=14;break}return console.log("error while simlating score: ".concat(s)),tn({judges_mark:{}}),an(!1),n.abrupt("return");case 14:console.log("simulated score:",c),tn(c),an(!0);case 17:case"end":return n.stop()}}),n)}))),un=function(n,e,t){var r=!0,i=!1,s=void 0;try{for(var c,a=V.marks.entries()[Symbol.iterator]();!(r=(c=a.next()).done);r=!0){var o=Sn(c.value,2),l=o[0];o[1];if(V.marks[l].judge==e._id)return V.marks[l][n]=t,q(V),void ln(V)}}catch(d){i=!0,s=d}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}var u={judge:e._id};u[n]=t,V.marks.push(u),q(V),ln(V)},dn=Pn(i().mark((function n(e,t){var r,s,c,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={tricks:V.tricks.filter((function(n){return null!=n})).map((function(n){return n.name})),marks:V.marks,did_no_start:V.did_not_start,warnings:V.warnings},n.t0=Sn,n.next=4,(0,M.Xv)("/competitions/".concat(k.code,"/runs/").concat(w,"/flights/").concat(F._id,"/new?published=").concat(e,"&save=",!0),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:if(n.t1=n.sent,s=(0,n.t0)(n.t1,3),c=s[0],a=s[1],s[2],!c){n.next=12;break}return C("error while saving score: ".concat(c)),n.abrupt("return");case 12:_("".concat(F.name,"'s flights saved with a ").concat(a.score," score")),0!=t&&on(I+t);case 14:case"end":return n.stop()}}),n)}))),hn=Pn(i().mark((function n(e){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm("Are you sure to publish a DNS flight ?")){n.next=2;break}return n.abrupt("return");case 2:V.did_not_start=!0,dn(!0);case 4:case"end":return n.stop()}}),n)})));return(0,c.useEffect)((function(){on(0)}),[]),O?(0,s.jsxs)(f.Z,{sx:{width:"100%",textAlign:"center"},children:[(0,s.jsx)(x.Z,{}),O]}):(0,s.jsxs)(v.Z,{children:[F&&(0,s.jsxs)(l.ZP,{container:!0,children:[(0,s.jsx)(l.ZP,{item:!0,xs:1,sm:1,children:(0,s.jsx)(K.Z,{onClick:function(){on(I-1)},children:(0,s.jsx)(Y.Z,{})})}),(0,s.jsx)(l.ZP,{item:!0,xs:10,sm:10,children:(0,s.jsx)($.Z,{id:"autocomplete-team",options:b.teams,value:F,getOptionLabel:function(n){return"".concat(n.name)},renderInput:function(n){return(0,s.jsx)(Q.Z,Cn({},n,{name:"team",label:"Team"}))},onChange:function(n,e){if(e){var t=!0,r=!1,i=void 0;try{for(var s,c=b.teams.entries()[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var a=Sn(s.value,2),o=a[0];if(a[1]._id==e._id)return void on(o)}}catch(l){r=!0,i=l}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}}}})}),(0,s.jsx)(l.ZP,{item:!0,xs:1,sm:1,children:(0,s.jsx)(K.Z,{onClick:function(){on(I+1)},children:(0,s.jsx)(U.Z,{})})})]}),(0,s.jsx)(l.ZP,{container:!0,spacing:2,children:"\xa0"}),(0,s.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,s.jsxs)(l.ZP,{container:!0,xs:6,children:[(0,s.jsx)(l.ZP,{xs:12,children:(0,s.jsx)(u.Z,{variant:"h5",children:"Maneuvers"})}),[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20].map((function(n){var e=null;return V&&V.tricks&&V.tricks[n]&&(e=V.tricks[n]),(0,s.jsx)(l.ZP,{xs:12,children:(0,s.jsx)($.Z,{id:"autocomplete-trick-{i}",options:rn,getOptionLabel:function(n){return"".concat(n.name," (").concat(n.acronym,") (").concat(n.technical_coefficient,")")},renderInput:function(n){return(0,s.jsx)(Q.Z,Cn({},n,{name:"trick"}))},value:e,onChange:function(e,t){V.tricks[n]=t,ln(V),q(V)}},"autocomplete-trick-{i}")},n)}))]}),(0,s.jsxs)(l.ZP,{container:!0,xs:6,children:[(0,s.jsxs)(l.ZP,{container:!0,xs:12,children:[(0,s.jsx)(u.Z,{variant:"h5",children:"Marks"}),(0,s.jsx)(f.Z,{sx:{width:"100%"},children:(0,s.jsx)(G.Z,{sx:{width:"100%",mb:2},children:(0,s.jsx)(J.Z,{children:(0,s.jsxs)(X.Z,{sx:{minWidth:750},children:[(0,s.jsx)(z.Z,{children:(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:"Judge"}),(0,s.jsx)(E.Z,{children:"Technical"}),(0,s.jsx)(E.Z,{children:"Choreography"}),(0,s.jsx)(E.Z,{children:"Landing"}),(0,s.jsx)(E.Z,{children:"Synchro"})]})}),(0,s.jsx)(R.Z,{children:b.judges.map((function(n){var e=0,t=0,r=0,i=0;for(var c in V.marks)if((c=V.marks[c]).judge==n._id){e=c.technical,t=c.choreography,r=c.landing,i=c.synchro;break}return(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:(0,s.jsx)(u.Z,{children:n.name})}),(0,s.jsx)(E.Z,{children:(0,s.jsx)(Tn,{onChange:function(e){un("technical",n,e.target.value)},value:e})}),(0,s.jsx)(E.Z,{children:(0,s.jsx)(Tn,{onChange:function(e){un("choreography",n,e.target.value)},value:t})}),(0,s.jsx)(E.Z,{children:(0,s.jsx)(Tn,{onChange:function(e){un("landing",n,e.target.value)},value:r})}),(0,s.jsx)(E.Z,{children:(0,s.jsx)(Tn,{onChange:function(e){un("synchro",n,e.target.value)},value:i})})]})}))})]})})})})]}),(0,s.jsxs)(l.ZP,{container:!0,xs:12,children:[(0,s.jsx)(u.Z,{variant:"h5",children:"Scores"}),(0,s.jsx)(X.Z,{children:(0,s.jsxs)(R.Z,{children:[(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Technicity: ",null!==(e=en.technicity)&&void 0!==e?e:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["% Bonus: ",null!==(t=en.bonus_percentage)&&void 0!==t?t:"","%"]})})]}),(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:(0,s.jsx)(u.Z,{children:"Judge's marks"})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Technical: ",null!==(r=en.judges_mark.technical)&&void 0!==r?r:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Choreography: ",null!==(a=en.judges_mark.choreography)&&void 0!==a?a:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Landing: ",null!==(o=en.judges_mark.landing)&&void 0!==o?o:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Synchro: ",null!==(h=en.judges_mark.synchro)&&void 0!==h?h:""]})})]}),(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:(0,s.jsx)(u.Z,{children:"Final's marks"})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Technical: ",null!==(p=en.technical)&&void 0!==p?p:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Choreography: ",null!==(j=en.choreography)&&void 0!==j?j:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Landing: ",null!==(m=en.landing)&&void 0!==m?m:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Synchro: ",null!==(Z=en.synchro)&&void 0!==Z?Z:""]})})]}),(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{children:["Bonuses: ",null!==(g=en.bonus)&&void 0!==g?g:""]})}),(0,s.jsx)(E.Z,{children:(0,s.jsxs)(u.Z,{variant:"h5",children:["Final Score: ",null!==(y=en.score)&&void 0!==y?y:""]})})]})]})})]}),(0,s.jsxs)(l.ZP,{container:!0,xs:12,children:[(0,s.jsxs)(l.ZP,{item:!0,xs:4,children:[(0,s.jsx)(d.Z,{variant:"contained",disabled:!cn,onClick:function(n){return dn(!1,0)},children:"Save"}),(0,s.jsx)(d.Z,{variant:"contained",disabled:!cn,onClick:function(n){return dn(!1,1)},children:"Save & Next"})]}),(0,s.jsxs)(l.ZP,{item:!0,xs:4,children:[(0,s.jsx)(d.Z,{variant:"contained",disabled:!cn,onClick:function(n){return dn(!0,0)},children:"Save & Publish"}),(0,s.jsx)(d.Z,{variant:"contained",disabled:!cn,onClick:function(n){return dn(!0,1)},children:"Save & Publish & Next"})]}),(0,s.jsx)(l.ZP,{item:!0,xs:4,children:(0,s.jsx)(d.Z,{onClick:hn,children:"Did not start"})})]})]})]})]})};function In(n,e,t,r,i,s,c){try{var a=n[s](c),o=a.value}catch(l){return void t(l)}a.done?e(o):Promise.resolve(o).then(r,i)}function Ln(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var s=n.apply(e,t);function c(n){In(s,r,i,c,a,"next",n)}function a(n){In(s,r,i,c,a,"throw",n)}c(void 0)}))}}function Rn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function En(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],r=!0,i=!1,s=void 0;try{for(var c,a=n[Symbol.iterator]();!(r=(c=a.next()).done)&&(t.push(c.value),!e||t.length!==e);r=!0);}catch(o){i=!0,s=o}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var An=(0,y.ZP)(k.Z)((function(n){var e=n.theme;return Rn(On={},e.breakpoints.down("md"),{minWidth:100}),Rn(On,e.breakpoints.down("sm"),{minWidth:67}),On})),zn=(0,y.ZP)("span")((function(n){var e=n.theme;return Rn({lineHeight:1.71,fontSize:"0.875rem",marginLeft:e.spacing(2.4)},e.breakpoints.down("md"),{display:"none"})})),Xn=function(){var n=(0,a.useRouter)(),e=n.query,t=e.cid,r=e.rid,y=En((0,H.z)(),4),k=y[0],G=(y[1],y[2],y[3]),K=(0,o.aF)(),Q=(K.user,K.authError,K.authIisLoading,(0,c.useState)(!1)),U=Q[0],Y=Q[1],$=(0,c.useState)(!1),nn=$[0],en=$[1],tn=(0,c.useState)({}),rn=tn[0],sn=tn[1],cn=(0,c.useState)(!1),an=cn[0],on=cn[1],ln=(0,c.useState)("actions"),un=ln[0],dn=ln[1],hn=En((0,M.Rs)(),1)[0],xn=((0,c.useRef)(),(0,c.useRef)(),(0,c.useRef)(),(0,c.useRef)(),(0,c.useRef)(),Ln(i().mark((function n(){var e,s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return on(!0),n.t0=En,n.next=4,(0,M.Xv)("/competitions/".concat(t),{expect_json:!0});case 4:if(n.t1=n.sent,e=(0,n.t0)(n.t1,3),s=e[0],c=e[1],e[2],!s){n.next=15;break}return Y(!1),en(!1),sn(!1),G("Error while retrieving competitions list: ".concat(s)),n.abrupt("return");case 15:c.delete="delete",c.update="update",c.id=c._id,Y(c),en(c.runs[r]),sn(Object.assign({},c)),on(!1);case 22:case"end":return n.stop()}}),n)})))),fn=Ln(i().mark((function n(e){var s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm("Are you sure to ".concat(e," run ").concat(r," of competition ").concat(t," ?"))){n.next=2;break}return n.abrupt("return");case 2:return n.t0=En,n.next=5,(0,M.Xv)("/competitions/".concat(t,"/runs/").concat(r,"/").concat(e),{expected_status:204,method:"POST"});case 5:if(n.t1=n.sent,s=(0,n.t0)(n.t1,3),c=s[0],s[1],s[2],!c){n.next=13;break}return G("error while ".concat(e," run ").concat(r," of competition ").concat(t,": ").concat(c)),n.abrupt("return");case 13:xn();case 14:case"end":return n.stop()}}),n)}))),pn=Ln(i().mark((function n(e){var s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=En,n.next=3,(0,M.Xv)("/competitions/".concat(t,"/runs/").concat(r,"/pilots"),{expected_status:204,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.map((function(n){return n.civlid})))});case 3:if(n.t1=n.sent,s=(0,n.t0)(n.t1,3),c=s[0],s[1],s[2],!c){n.next=11;break}return G("error while updating pilots list ".concat(t,": ").concat(c)),n.abrupt("return");case 11:xn();case 12:case"end":return n.stop()}}),n)}))),jn=Ln(i().mark((function n(e){var s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=En,n.next=3,(0,M.Xv)("/competitions/".concat(t,"/runs/").concat(r,"/teams"),{expected_status:204,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.map((function(n){return n.id})))});case 3:if(n.t1=n.sent,s=(0,n.t0)(n.t1,3),c=s[0],s[1],s[2],!c){n.next=11;break}return G("error while updating teams list ".concat(t,": ").concat(c)),n.abrupt("return");case 11:xn();case 12:case"end":return n.stop()}}),n)}))),vn=Ln(i().mark((function n(e){var s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=En,n.next=3,(0,M.Xv)("/competitions/".concat(t,"/runs/").concat(r,"/judges"),{expected_status:204,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.map((function(n){return n.id})))});case 3:if(n.t1=n.sent,s=(0,n.t0)(n.t1,3),c=s[0],s[1],s[2],!c){n.next=11;break}return G("error while updating judges list ".concat(t,": ").concat(c)),n.abrupt("return");case 11:xn();case 12:case"end":return n.stop()}}),n)}))),mn=Ln(i().mark((function n(e){var s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=En,n.next=3,(0,M.Xv)("/competitions/".concat(t,"/runs/").concat(r,"/repeatable_tricks"),{expected_status:204,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.map((function(n){return n.id})))});case 3:if(n.t1=n.sent,s=(0,n.t0)(n.t1,3),c=s[0],s[1],s[2],!c){n.next=11;break}return G("error while updating repeatable tricks list ".concat(t,": ").concat(c)),n.abrupt("return");case 11:xn();case 12:case"end":return n.stop()}}),n)}))),Zn=Ln(i().mark((function n(e){var s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=En,n.next=3,(0,M.Xv)("/competitions/".concat(t,"/runs/").concat(r,"/config"),{expected_status:204,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 3:if(n.t1=n.sent,s=(0,n.t0)(n.t1,3),c=s[0],s[1],s[2],!c){n.next=11;break}return G("error while updating config ".concat(t,": ").concat(c)),n.abrupt("return");case 11:xn();case 12:case"end":return n.stop()}}),n)})));Ln(i().mark((function n(e){var s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return alert("No yet implemented! #TODO"),n.abrupt("return");case 5:return on(!0),n.t0=En,n.next=9,(0,M.Xv)("/competitions/".concat(undefined,"/runs/").concat(r),{method:"DELETE",expected_status:204});case 9:n.t1=n.sent,s=(0,n.t0)(n.t1,3),c=s[0],s[1],s[2],c?G("Error while deleting run #".concat(r," from competition ").concat(t,": ").concat(c)):k("Run #".concat(r," from competition ").concat(t," successfully deleted")),xn();case 16:case"end":return n.stop()}}),n)})));return(0,c.useEffect)((function(){n.isReady&&xn()}),[n.isReady]),an||!n.isReady?(0,s.jsxs)(f.Z,{sx:{width:"100%",textAlign:"center"},children:[(0,s.jsx)(x.Z,{}),"Loading"]}):U&&nn?(0,s.jsxs)(l.ZP,{container:!0,spacing:6,children:[(0,s.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,s.jsx)(u.Z,{variant:"h6",children:(0,s.jsx)(j.Z,{href:"".concat("/acropyx2/preprod","/competitions/show?cid=").concat(U.code),children:U.name})}),(0,s.jsxs)(u.Z,{variant:"h3",children:["Run #",parseInt(r)+1,(0,s.jsx)(h.Z,{onClick:xn})]})]}),(0,s.jsxs)(l.ZP,{item:!0,xs:12,md:6,sx:{paddingBottom:4},children:[(0,s.jsxs)(u.Z,{children:["Status: ",(0,s.jsx)("strong",{children:nn.state}),"init"==nn.state&&(0,s.jsx)(d.Z,{variant:"outlined",className:"hideToPrint",startIcon:(0,s.jsx)(w.Z,{}),onClick:function(){return fn("open")},children:"Open"}),"open"==nn.state&&(0,s.jsx)(d.Z,{variant:"outlined",className:"hideToPrint",startIcon:(0,s.jsx)(P.Z,{}),onClick:function(){return fn("close")},children:"Close"}),"closed"==nn.state&&(0,s.jsx)(d.Z,{variant:"outlined",className:"hideToPrint",startIcon:(0,s.jsx)(_.Z,{}),onClick:function(){return fn("reopen")},children:"Reopen"})]}),(0,s.jsxs)(u.Z,{children:["Type: ",(0,s.jsx)("strong",{children:rn.type})]})]}),(0,s.jsx)(l.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{children:(0,s.jsxs)(g.ZP,{value:un,children:[(0,s.jsxs)(m.Z,{className:"hideToPrint",onChange:function(n,e){dn(e)},"aria-label":"account-settings tabs",sx:{borderBottom:function(n){return"1px solid ".concat(n.palette.divider)}},children:["solo"==U.type&&(0,s.jsx)(An,{value:"pilots",label:(0,s.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(b.Z,{}),(0,s.jsx)(zn,{children:"Pilots"})]})}),"synchro"==U.type&&(0,s.jsx)(An,{value:"teams",label:(0,s.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(N.Z,{}),(0,s.jsx)(zn,{children:"Teams"})]})}),(0,s.jsx)(An,{value:"judges",label:(0,s.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(C.Z,{}),(0,s.jsx)(zn,{children:"Judges"})]})}),(0,s.jsx)(An,{value:"repeatable_tricks",label:(0,s.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(S.Z,{}),(0,s.jsx)(zn,{children:"Repeatables tricks"})]})}),(0,s.jsx)(An,{value:"settings",label:(0,s.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(O.Z,{}),(0,s.jsx)(zn,{children:"Run Settings"})]})}),(0,s.jsx)(An,{value:"flights",label:(0,s.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(I.Z,{}),(0,s.jsx)(zn,{children:"Flights"})]})}),(0,s.jsx)(An,{value:"starting_order",label:(0,s.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(L.Z,{}),(0,s.jsx)(zn,{children:"Starting Order"})]})}),(0,s.jsx)(An,{value:"results",label:(0,s.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(T.Z,{}),(0,s.jsx)(zn,{children:"Results"})]})})]}),(0,s.jsx)(Z.Z,{sx:{p:0},value:"pilots",children:(0,s.jsx)(F.Z,{pilots:nn.pilots,allPilots:U.pilots,update:function(n){return pn(n)}})}),(0,s.jsx)(Z.Z,{sx:{p:0},value:"teams",children:(0,s.jsx)(D.Z,{teams:nn.teams,allTeams:U.teams,update:function(n){return jn(n)}})}),(0,s.jsx)(Z.Z,{sx:{p:0},value:"judges",children:(0,s.jsx)(B.Z,{judges:nn.judges,allJudges:U.judges,update:function(n){return vn(n)}})}),(0,s.jsx)(Z.Z,{sx:{p:0},value:"repeatable_tricks",children:(0,s.jsx)(q.Z,{tricks:nn.repeatable_tricks,allTricks:hn,update:function(n){return mn(n)}})}),(0,s.jsx)(Z.Z,{sx:{p:0},value:"settings",children:(0,s.jsx)(W.Z,{config:nn.config,update:function(n){return Zn(n)},type:U.type})}),(0,s.jsxs)(Z.Z,{sx:{p:0},value:"flights",children:["solo"==U.type&&(0,s.jsx)(bn,{comp:U,run:nn,rid:r}),"synchro"==U.type&&(0,s.jsx)(Nn,{comp:U,run:nn,rid:r})]}),(0,s.jsx)(Z.Z,{sx:{p:0},value:"starting_order",children:(0,s.jsx)(J.Z,{children:(0,s.jsxs)(v.Z,{children:[(0,s.jsx)(f.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,s.jsxs)(u.Z,{variant:"h4",children:["Run ",parseInt(r)+1," Starting Order"]})}),(0,s.jsxs)(X.Z,{sx:{minWidth:750},children:[(0,s.jsx)(z.Z,{children:(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(E.Z,{children:"Starting Position"}),(0,s.jsx)(E.Z,{children:"Pilot"})]})}),(0,s.jsx)(R.Z,{children:nn.pilots.sort((function(n,e){return e.rank-n.rank})).map((function(n,e){return(0,s.jsxs)(A.Z,{children:[(0,s.jsxs)(E.Z,{children:["#",e+1]}),(0,s.jsx)(E.Z,{children:n.name})]},"pilot-".concat(e))}))})]})]})})}),(0,s.jsx)(Z.Z,{sx:{p:0},value:"results",children:(0,s.jsx)(V.Z,{code:t,rid:r})})]})})})]}):""}}},function(n){n.O(0,[571,885,292,177,329,897,49,238,335,457,774,888,179],(function(){return e=454,n(n.s=e);var e}));var e=n.O();_N_E=e}]);