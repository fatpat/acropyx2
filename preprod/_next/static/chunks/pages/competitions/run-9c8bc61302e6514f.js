(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{6130:function(n,e,r){"use strict";var t=r(5318);e.Z=void 0;var s=t(r(4938)),i=r(5893),c=(0,s.default)((0,i.jsx)("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),"List");e.Z=c},1659:function(n,e,r){"use strict";var t=r(5318);e.Z=void 0;var s=t(r(4938)),i=r(5893),c=(0,s.default)((0,i.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore");e.Z=c},7958:function(n,e,r){"use strict";var t=r(5318);e.Z=void 0;var s=t(r(4938)),i=r(5893),c=(0,s.default)((0,i.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");e.Z=c},5846:function(n,e,r){"use strict";var t=r(5318);e.Z=void 0;var s=t(r(4938)),i=r(5893),c=(0,s.default)((0,i.jsx)("path",{d:"M12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm-3.48.94C8.04 17.55 7 16.76 7 14H5c0 2.7.93 4.41 2.3 5.5.5.4 1.1.7 1.7.9V24h6v-3.6c.6-.2 1.2-.5 1.7-.9 1.37-1.09 2.3-2.8 2.3-5.5h-2c0 2.76-1.04 3.55-1.52 3.94C14.68 18.54 14 19 12 19s-2.68-.46-3.48-1.06zM12 0C5.92 0 1 1.9 1 4.25v3.49c0 .81.88 1.26 1.56.83.14-.09.28-.18.44-.26L5 13h2l1.5-6.28c1.1-.14 2.28-.22 3.5-.22s2.4.08 3.5.22L17 13h2l2-4.69c.16.09.3.17.44.26.68.43 1.56-.02 1.56-.83V4.25C23 1.9 18.08 0 12 0zM5.88 11.24 4.37 7.69c.75-.28 1.6-.52 2.53-.71l-1.02 4.26zm12.24 0L17.1 6.98c.93.19 1.78.43 2.53.71l-1.51 3.55z"}),"Paragliding");e.Z=c},454:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/competitions/run",function(){return r(6736)}])},6736:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return vn}});var t=r(8520),s=r.n(t),i=r(5893),c=r(7294),a=r(1163),l=r(4713),o=r(6886),d=r(5861),u=r(3321),h=r(666),x=r(1458),j=r(7357),p=r(6242),Z=r(122),f=r(298),m=r(5050),v=r(5670),g=r(1496),y=r(44),k=r(1395),b=r(1300),w=r(594),_=r(7440),P=r(3911),T=r(984),S=r(4229),C=r(5089),O=r(2563),I=r(5846),R=r(6130),N=r(295),z=r(3252),E=r(3816),L=r(7906),A=r(2882),H=(r(4803),r(4117)),X=(r(7497),r(9780),r(5148)),J=r(9233),M=(r(1194),r(3521),r(7250),r(3740),r(4451)),B=r(3798),F=r(8321),W=r(4906),D=r(4267),V=r(3184),q=r(9755),G=r.n(q);function K(n,e,r,t,s,i,c){try{var a=n[i](c),l=a.value}catch(o){return void r(o)}a.done?e(l):Promise.resolve(l).then(t,s)}function Q(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=[],t=!0,s=!1,i=void 0;try{for(var c,a=n[Symbol.iterator]();!(t=(c=a.next()).done)&&(r.push(c.value),!e||r.length!==e);t=!0);}catch(l){s=!0,i=l}finally{try{t||null==a.return||a.return()}finally{if(s)throw i}}return r}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var U=function(n){var e,r=n.code,t=n.rid,a=Q((0,X.z)(),4),l=(a[0],a[1],a[2],a[3]),u=(0,c.useState)(!1),h=u[0],x=u[1],p=(e=s().mark((function n(){var e,i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Q,n.next=3,(0,J.Xv)("/competitions/".concat(r,"/results/").concat(t,"?published_only=false"),{expect_json:!0});case 3:if(n.t1=n.sent,e=(0,n.t0)(n.t1,3),i=e[0],c=e[1],e[2],!i){n.next=12;break}return l("error while retrieving results for competition ".concat(r,": ").concat(i)),x(!1),n.abrupt("return");case 12:c.results=c.results.map((function(n,e){return n.rank=e+1,n})),x(c);case 14:case"end":return n.stop()}}),n)})),function(){var n=this,r=arguments;return new Promise((function(t,s){var i=e.apply(n,r);function c(n){K(i,t,s,c,a,"next",n)}function a(n){K(i,t,s,c,a,"throw",n)}c(void 0)}))});return(0,c.useEffect)((function(){p()}),[]),h?(window.onbeforeprint=function(n){G()(".hideToPrint").hide()},window.onafterprint=function(n){G()(".hideToPrint").show()},(0,i.jsxs)(D.Z,{children:[(0,i.jsx)(j.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,i.jsxs)(d.Z,{variant:"h4",children:[(0,i.jsx)(C.Z,{fontSize:"large"}),h.final?"Final":"Intermediate"," Run ",parseInt(t)+1," Results"]})}),(0,i.jsx)(o.ZP,{container:!0,spacing:7,children:(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:12,children:(0,i.jsx)(A.Z,{children:(0,i.jsxs)(L.Z,{sx:{minWidth:750},children:[(0,i.jsx)(V.Z,{children:(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"Rank"}),(0,i.jsx)(z.Z,{children:"Pilot"}),(0,i.jsx)(z.Z,{children:"Tricks"}),(0,i.jsx)(z.Z,{children:"Warnings"}),(0,i.jsx)(z.Z,{children:"Technicity"}),(0,i.jsx)(z.Z,{children:"Judges marks"}),(0,i.jsx)(z.Z,{children:"Final marks"}),(0,i.jsx)(z.Z,{children:"Bonus"}),(0,i.jsx)(z.Z,{children:"Score"})]})}),(0,i.jsxs)(N.Z,{children:[h.results.sort((function(n,e){return e.final_marks.score-n.final_marks.score})).map((function(n,e){return(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:e+1}),(0,i.jsx)(z.Z,{children:n.pilot.name}),(0,i.jsx)(z.Z,{children:n.tricks.map((function(n){return(0,i.jsx)("p",{children:n.name})}))}),(0,i.jsxs)(z.Z,{children:[(0,i.jsxs)("p",{children:["warnings: ",n.final_marks.warnings.length]}),(0,i.jsxs)("p",{children:["Malus: ",n.final_marks.malus,"%"]}),n.did_not_start&&(0,i.jsx)("p",{children:"DID NOT START"})]}),(0,i.jsxs)(z.Z,{children:[(0,i.jsxs)("p",{children:["Techniciy: ",n.final_marks.technicity]}),(0,i.jsxs)("p",{children:["Bonus: ",n.final_marks.bonus_percentage,"%"]})]}),(0,i.jsxs)(z.Z,{children:[(0,i.jsxs)("p",{children:["Technical: ",n.final_marks.judges_mark.technical]}),(0,i.jsxs)("p",{children:["Choreography: ",n.final_marks.judges_mark.choreography]}),(0,i.jsxs)("p",{children:["Landing: ",n.final_marks.judges_mark.landing]})]}),(0,i.jsxs)(z.Z,{children:[(0,i.jsxs)("p",{children:["Technical: ",n.final_marks.technical]}),(0,i.jsxs)("p",{children:["Choreography: ",n.final_marks.choreography]}),(0,i.jsxs)("p",{children:["Landing: ",n.final_marks.landing]})]}),(0,i.jsx)(z.Z,{children:n.final_marks.bonus}),(0,i.jsx)(z.Z,{children:(0,i.jsx)("strong",{children:n.final_marks.score})})]},"result-{i}")})),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"})]},"blank1"),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"})]},"blank2"),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"})]},"blank3"),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"})]},"blank4"),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"})]},"blank5"),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"})]},"blank6"),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"})]},"blank7"),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"})]},"blank8"),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"})]},"blank9"),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"}),(0,i.jsx)(z.Z,{children:"\xa0"})]},"blank10")]})]})})})})]})):"loading ..."},Y=r(1736),$=r(5113),nn=r(3946),en=r(2474),rn=r(7958),tn=r(1659),sn=r(9624);function cn(n,e,r,t,s,i,c){try{var a=n[i](c),l=a.value}catch(o){return void r(o)}a.done?e(l):Promise.resolve(l).then(t,s)}function an(n){return function(){var e=this,r=arguments;return new Promise((function(t,s){var i=n.apply(e,r);function c(n){cn(i,t,s,c,a,"next",n)}function a(n){cn(i,t,s,c,a,"throw",n)}c(void 0)}))}}function ln(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function on(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})))),t.forEach((function(e){ln(n,e,r[e])}))}return n}function dn(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=[],t=!0,s=!1,i=void 0;try{for(var c,a=n[Symbol.iterator]();!(t=(c=a.next()).done)&&(r.push(c.value),!e||r.length!==e);t=!0);}catch(l){s=!0,i=l}finally{try{t||null==a.return||a.return()}finally{if(s)throw i}}return r}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var un,hn=function(n){var e,r,t,a,l,h,x,p,Z,f,m,v,g=n.comp,y=n.run,k=n.rid,b=dn((0,X.z)(),4),w=b[0],_=(b[1],b[2],b[3]),P=(0,c.useState)(0),T=P[0],S=P[1],C=(0,c.useState)(null),O=C[0],I=C[1],R=(0,c.useState)({tricks:[],marks:[],did_not_start:!1,warnings:[]}),M=R[0],B=R[1],F=(0,c.useState)({judges_mark:{}}),W=F[0],q=F[1],G=dn((0,J.fR)(g.type),1)[0],K=(0,c.useState)(!1),Q=K[0],U=K[1],Y=((0,c.useRef)(),an(s().mark((function n(e){var r,t,i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={tricks:e.tricks.filter((function(n){return null!=n})).map((function(n){return n.name})),marks:e.marks,did_no_start:e.did_not_start,warnings:e.warnings},n.t0=dn,n.next=4,(0,J.Xv)("/scores/simulate/solo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:if(n.t1=n.sent,t=(0,n.t0)(n.t1,3),i=t[0],c=t[1],t[2],!i){n.next=14;break}return console.log("error while simlating score: ".concat(i)),q({judges_mark:{}}),U(!1),n.abrupt("return");case 14:console.log("simulated score:",c),q(c),U(!0);case 17:case"end":return n.stop()}}),n)})))),cn=function(n,e,r){var t=!0,s=!1,i=void 0;try{for(var c,a=M.marks.entries()[Symbol.iterator]();!(t=(c=a.next()).done);t=!0){var l=dn(c.value,2),o=l[0];l[1];if(M.marks[o].judge==e._id)return M.marks[o][n]=r,B(M),void Y(M)}}catch(u){s=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(s)throw i}}var d={judge:e._id};d[n]=r,M.marks.push(d),B(M),Y(M)},ln=an(s().mark((function n(e){var r,t,i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={tricks:M.tricks.filter((function(n){return null!=n})).map((function(n){return n.name})),marks:M.marks,did_no_start:M.did_not_start,warnings:M.warnings},n.t0=dn,n.next=4,(0,J.Xv)("/competitions/".concat(g.code,"/runs/").concat(k,"/flights/").concat(O.civlid,"/new?published=").concat(e,"&save=",!0),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:n.t1=n.sent,t=(0,n.t0)(n.t1,3),i=t[0],c=t[1],t[2],i&&_("error while saving score: ".concat(i)),w("".concat(O.name,"'s flights saved with a ").concat(c.score," score"));case 11:case"end":return n.stop()}}),n)})));return(0,c.useEffect)((function(){T=0,I(y.pilots.sort((function(n,e){return e.rank-n.rank}))[T]),S(T)}),[]),(0,i.jsxs)(D.Z,{children:[O&&(0,i.jsxs)(o.ZP,{container:!0,children:[(0,i.jsx)(o.ZP,{item:!0,xs:1,sm:1,children:(0,i.jsx)(nn.Z,{onClick:function(){0!=T&&(T-=1,I(y.pilots[T]),S(T))},children:(0,i.jsx)(tn.Z,{})})}),(0,i.jsx)(o.ZP,{item:!0,xs:10,sm:10,children:(0,i.jsx)(sn.Z,{id:"autocomplete-pilot",options:y.pilots.sort((function(n,e){return e.rank-n.rank})),value:O,getOptionLabel:function(n){return"".concat(n.name," (").concat(n.civlid,")")},renderInput:function(n){return(0,i.jsx)(en.Z,on({},n,{name:"pilot",label:"Pilot"}))},onChange:function(n,e){if(e){var r=!0,t=!1,s=void 0;try{for(var i,c=y.pilots.entries()[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var a=dn(i.value,2),l=a[0];if(a[1].civlid==e.civlid)return I(e),void S(l)}}catch(o){t=!0,s=o}finally{try{r||null==c.return||c.return()}finally{if(t)throw s}}}}})}),(0,i.jsx)(o.ZP,{item:!0,xs:1,sm:1,children:(0,i.jsx)(nn.Z,{onClick:function(){console.log(T,y.pilots.length),T+1>=y.pilots.length||(T+=1,I(y.pilots[T]),S(T))},children:(0,i.jsx)(rn.Z,{})})})]}),(0,i.jsx)(o.ZP,{container:!0,spacing:2,children:"separator"}),(0,i.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,i.jsxs)(o.ZP,{container:!0,xs:6,children:[(0,i.jsx)(o.ZP,{xs:12,children:(0,i.jsx)(d.Z,{variant:"h5",children:"Maneuvers"})}),[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map((function(n){return(0,i.jsx)(o.ZP,{xs:12,children:(0,i.jsx)(sn.Z,{id:"autocomplete-trick-{i}",options:G,getOptionLabel:function(n){return"".concat(n.name," (").concat(n.acronym,") (").concat(n.technical_coefficient,")")},renderInput:function(n){return(0,i.jsx)(en.Z,on({},n,{name:"trick",label:"Trick"}))},onChange:function(e,r){M.tricks[n]=r,Y(M),B(M)}},"autocomplete-trick-{i}")},n)}))]}),(0,i.jsxs)(o.ZP,{container:!0,xs:6,children:[(0,i.jsxs)(o.ZP,{container:!0,xs:12,children:[(0,i.jsx)(d.Z,{variant:"h5",children:"Marks"}),(0,i.jsx)(j.Z,{sx:{width:"100%"},children:(0,i.jsx)($.Z,{sx:{width:"100%",mb:2},children:(0,i.jsx)(A.Z,{children:(0,i.jsxs)(L.Z,{sx:{minWidth:750},children:[(0,i.jsx)(V.Z,{children:(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:"Judge"}),(0,i.jsx)(z.Z,{children:"Technical"}),(0,i.jsx)(z.Z,{children:"Choreography"}),(0,i.jsx)(z.Z,{children:"Landing"}),"synchro"==g.type&&(0,i.jsx)(z.Z,{children:"Synchro"})]})}),(0,i.jsx)(N.Z,{children:y.judges.map((function(n){return(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:(0,i.jsx)(d.Z,{children:n.name})}),(0,i.jsx)(z.Z,{children:(0,i.jsx)(en.Z,{type:"number",InputProps:{inputProps:{min:"0",max:"10",step:"0.5"}},onChange:function(e){cn("technical",n,e.target.value)}})}),(0,i.jsx)(z.Z,{children:(0,i.jsx)(en.Z,{type:"number",InputProps:{inputProps:{min:"0",max:"10",step:"0.5"}},onChange:function(e){cn("choreography",n,e.target.value)}})}),(0,i.jsx)(z.Z,{children:(0,i.jsx)(en.Z,{type:"number",InputProps:{inputProps:{min:"0",max:"10",step:"0.5"}},onChange:function(e){cn("landing",n,e.target.value)}})}),"synchro"==g.type&&(0,i.jsx)(z.Z,{children:(0,i.jsx)(en.Z,{type:"number",InputProps:{inputProps:{min:"0",max:"10",step:"0.5"}},onChange:function(e){cn("synchro",n,e.target.value)}})})]})}))})]})})})})]}),(0,i.jsxs)(o.ZP,{container:!0,xs:12,children:[(0,i.jsx)(d.Z,{variant:"h5",children:"Scores"}),(0,i.jsx)(L.Z,{children:(0,i.jsxs)(N.Z,{children:[(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["Technicity: ",null!==(e=W.technicity)&&void 0!==e?e:""]})}),(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["% Bonus: ",null!==(r=W.bonus_percentage)&&void 0!==r?r:"","%"]})})]}),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:(0,i.jsx)(d.Z,{children:"Judge's marks"})}),(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["Technical: ",null!==(t=W.judges_mark.technical)&&void 0!==t?t:""]})}),(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["Choreography: ",null!==(a=W.judges_mark.choreography)&&void 0!==a?a:""]})}),(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["Landing: ",null!==(l=W.judges_mark.landing)&&void 0!==l?l:""]})}),"synchro"==g.type&&(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["Synchro: ",null!==(h=W.judges_mark.synchro)&&void 0!==h?h:""]})})]}),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:(0,i.jsx)(d.Z,{children:"Final's marks"})}),(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["Technical: ",null!==(x=W.technical)&&void 0!==x?x:""]})}),(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["Choreography: ",null!==(p=W.choreography)&&void 0!==p?p:""]})}),(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["Landing: ",null!==(Z=W.landing)&&void 0!==Z?Z:""]})}),"synchro"==g.type&&(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["Synchro: ",null!==(f=W.synchro)&&void 0!==f?f:""]})})]}),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{children:["Bonuses: ",null!==(m=W.bonus)&&void 0!==m?m:""]})}),(0,i.jsx)(z.Z,{children:(0,i.jsxs)(d.Z,{variant:"h5",children:["Final Score: ",null!==(v=W.score)&&void 0!==v?v:""]})})]})]})})]}),(0,i.jsxs)(o.ZP,{container:!0,xs:12,children:[(0,i.jsx)(o.ZP,{item:!0,xs:6,children:(0,i.jsx)(u.Z,{variant:"contained",disabled:!Q,onClick:function(n){return ln(!1)},children:"Save Results"})}),(0,i.jsx)(o.ZP,{item:!0,xs:6,children:(0,i.jsx)(u.Z,{variant:"contained",disabled:!Q,onClick:function(n){return ln(!0)},children:"Save & Publish Results"})})]})]})]}),(0,i.jsx)(o.ZP,{container:!0,spacing:7,children:(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:12,children:(0,i.jsx)(H.Z,{rows:y.flights,headCells:[{id:"rank"},{id:"pilot",rewrite:function(n){return n.name}},{id:"score",numeric:!0}],orderById:"rank"})})})]})};function xn(n,e,r,t,s,i,c){try{var a=n[i](c),l=a.value}catch(o){return void r(o)}a.done?e(l):Promise.resolve(l).then(t,s)}function jn(n){return function(){var e=this,r=arguments;return new Promise((function(t,s){var i=n.apply(e,r);function c(n){xn(i,t,s,c,a,"next",n)}function a(n){xn(i,t,s,c,a,"throw",n)}c(void 0)}))}}function pn(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Zn(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=[],t=!0,s=!1,i=void 0;try{for(var c,a=n[Symbol.iterator]();!(t=(c=a.next()).done)&&(r.push(c.value),!e||r.length!==e);t=!0);}catch(l){s=!0,i=l}finally{try{t||null==a.return||a.return()}finally{if(s)throw i}}return r}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var fn=(0,g.ZP)(y.Z)((function(n){var e=n.theme;return pn(un={},e.breakpoints.down("md"),{minWidth:100}),pn(un,e.breakpoints.down("sm"),{minWidth:67}),un})),mn=(0,g.ZP)("span")((function(n){var e=n.theme;return pn({lineHeight:1.71,fontSize:"0.875rem",marginLeft:e.spacing(2.4)},e.breakpoints.down("md"),{display:"none"})})),vn=function(){var n=(0,a.useRouter)(),e=n.query,r=e.cid,t=e.rid,g=Zn((0,X.z)(),4),y=g[0],H=(g[1],g[2],g[3]),D=(0,l.aF)(),V=(D.user,D.authError,D.authIisLoading,(0,c.useState)(!1)),q=V[0],G=V[1],K=(0,c.useState)(!1),Q=K[0],$=K[1],nn=(0,c.useState)({}),en=nn[0],rn=nn[1],tn=(0,c.useState)(!1),sn=tn[0],cn=tn[1],an=(0,c.useState)("actions"),ln=an[0],on=an[1],dn=Zn((0,J.Rs)(),1)[0],un=((0,c.useRef)(),(0,c.useRef)(),(0,c.useRef)(),(0,c.useRef)(),(0,c.useRef)(),jn(s().mark((function n(){var e,i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return cn(!0),n.t0=Zn,n.next=4,(0,J.Xv)("/competitions/".concat(r),{expect_json:!0});case 4:if(n.t1=n.sent,e=(0,n.t0)(n.t1,3),i=e[0],c=e[1],e[2],!i){n.next=15;break}return G(!1),$(!1),rn(!1),H("Error while retrieving competitions list: ".concat(i)),n.abrupt("return");case 15:c.delete="delete",c.update="update",c.id=c._id,G(c),$(c.runs[t]),rn(Object.assign({},c)),cn(!1);case 22:case"end":return n.stop()}}),n)})))),xn=jn(s().mark((function n(e){var i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm("Are you sure to ".concat(e," run ").concat(t," of competition ").concat(r," ?"))){n.next=2;break}return n.abrupt("return");case 2:return n.t0=Zn,n.next=5,(0,J.Xv)("/competitions/".concat(r,"/runs/").concat(t,"/").concat(e),{expected_status:204,method:"POST"});case 5:if(n.t1=n.sent,i=(0,n.t0)(n.t1,3),c=i[0],i[1],i[2],!c){n.next=13;break}return H("error while ".concat(e," run ").concat(t," of competition ").concat(r,": ").concat(c)),n.abrupt("return");case 13:un();case 14:case"end":return n.stop()}}),n)}))),pn=jn(s().mark((function n(e){var i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Zn,n.next=3,(0,J.Xv)("/competitions/".concat(r,"/runs/").concat(t,"/pilots"),{expected_status:204,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.map((function(n){return n.civlid})))});case 3:if(n.t1=n.sent,i=(0,n.t0)(n.t1,3),c=i[0],i[1],i[2],!c){n.next=11;break}return H("error while updating pilots list ".concat(r,": ").concat(c)),n.abrupt("return");case 11:un();case 12:case"end":return n.stop()}}),n)}))),vn=jn(s().mark((function n(e){var i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Zn,n.next=3,(0,J.Xv)("/competitions/".concat(r,"/runs/").concat(t,"/teams"),{expected_status:204,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.map((function(n){return n.id})))});case 3:if(n.t1=n.sent,i=(0,n.t0)(n.t1,3),c=i[0],i[1],i[2],!c){n.next=11;break}return H("error while updating teams list ".concat(r,": ").concat(c)),n.abrupt("return");case 11:un();case 12:case"end":return n.stop()}}),n)}))),gn=jn(s().mark((function n(e){var i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Zn,n.next=3,(0,J.Xv)("/competitions/".concat(r,"/runs/").concat(t,"/judges"),{expected_status:204,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.map((function(n){return n.id})))});case 3:if(n.t1=n.sent,i=(0,n.t0)(n.t1,3),c=i[0],i[1],i[2],!c){n.next=11;break}return H("error while updating judges list ".concat(r,": ").concat(c)),n.abrupt("return");case 11:un();case 12:case"end":return n.stop()}}),n)}))),yn=jn(s().mark((function n(e){var i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Zn,n.next=3,(0,J.Xv)("/competitions/".concat(r,"/runs/").concat(t,"/repeatable_tricks"),{expected_status:204,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.map((function(n){return n.id})))});case 3:if(n.t1=n.sent,i=(0,n.t0)(n.t1,3),c=i[0],i[1],i[2],!c){n.next=11;break}return H("error while updating repeatable tricks list ".concat(r,": ").concat(c)),n.abrupt("return");case 11:un();case 12:case"end":return n.stop()}}),n)}))),kn=jn(s().mark((function n(e){var i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Zn,n.next=3,(0,J.Xv)("/competitions/".concat(r,"/runs/").concat(t,"/config"),{expected_status:204,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 3:if(n.t1=n.sent,i=(0,n.t0)(n.t1,3),c=i[0],i[1],i[2],!c){n.next=11;break}return H("error while updating config ".concat(r,": ").concat(c)),n.abrupt("return");case 11:un();case 12:case"end":return n.stop()}}),n)})));jn(s().mark((function n(e){var i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return alert("No yet implemented! #TODO"),n.abrupt("return");case 5:return cn(!0),n.t0=Zn,n.next=9,(0,J.Xv)("/competitions/".concat(undefined,"/runs/").concat(t),{method:"DELETE",expected_status:204});case 9:n.t1=n.sent,i=(0,n.t0)(n.t1,3),c=i[0],i[1],i[2],c?H("Error while deleting run #".concat(t," from competition ").concat(r,": ").concat(c)):y("Run #".concat(t," from competition ").concat(r," successfully deleted")),un();case 16:case"end":return n.stop()}}),n)})));return(0,c.useEffect)((function(){n.isReady&&un()}),[n.isReady]),sn||!n.isReady?(0,i.jsxs)(j.Z,{sx:{width:"100%",textAlign:"center"},children:[(0,i.jsx)(x.Z,{}),"Loading"]}):q&&Q?(0,i.jsxs)(o.ZP,{container:!0,spacing:6,children:[(0,i.jsxs)(o.ZP,{item:!0,xs:12,children:[(0,i.jsx)(d.Z,{variant:"h6",children:(0,i.jsx)(Z.Z,{href:"".concat("/acropyx2/preprod","/competitions/show?cid=").concat(q.code),children:q.name})}),(0,i.jsxs)(d.Z,{variant:"h3",children:["Run #",parseInt(t)+1,(0,i.jsx)(h.Z,{onClick:un})]})]}),(0,i.jsxs)(o.ZP,{item:!0,xs:12,md:6,sx:{paddingBottom:4},children:[(0,i.jsxs)(d.Z,{children:["Status: ",(0,i.jsx)("strong",{children:Q.state}),"init"==Q.state&&(0,i.jsx)(u.Z,{variant:"outlined",className:"hideToPrint",startIcon:(0,i.jsx)(b.Z,{}),onClick:function(){return xn("open")},children:"Open"}),"open"==Q.state&&(0,i.jsx)(u.Z,{variant:"outlined",className:"hideToPrint",startIcon:(0,i.jsx)(w.Z,{}),onClick:function(){return xn("close")},children:"Close"}),"closed"==Q.state&&(0,i.jsx)(u.Z,{variant:"outlined",className:"hideToPrint",startIcon:(0,i.jsx)(_.Z,{}),onClick:function(){return xn("reopen")},children:"Reopen"})]}),(0,i.jsxs)(d.Z,{children:["Type: ",(0,i.jsx)("strong",{children:en.type})]})]}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(p.Z,{children:(0,i.jsxs)(v.ZP,{value:ln,children:[(0,i.jsxs)(f.Z,{className:"hideToPrint",onChange:function(n,e){on(e)},"aria-label":"account-settings tabs",sx:{borderBottom:function(n){return"1px solid ".concat(n.palette.divider)}},children:["solo"==q.type&&(0,i.jsx)(fn,{value:"pilots",label:(0,i.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(k.Z,{}),(0,i.jsx)(mn,{children:"Pilots"})]})}),"synchro"==q.type&&(0,i.jsx)(fn,{value:"teams",label:(0,i.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(O.Z,{}),(0,i.jsx)(mn,{children:"Teams"})]})}),(0,i.jsx)(fn,{value:"judges",label:(0,i.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(P.Z,{}),(0,i.jsx)(mn,{children:"Judges"})]})}),(0,i.jsx)(fn,{value:"repeatable_tricks",label:(0,i.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(T.Z,{}),(0,i.jsx)(mn,{children:"Repeatables tricks"})]})}),(0,i.jsx)(fn,{value:"settings",label:(0,i.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(S.Z,{}),(0,i.jsx)(mn,{children:"Run Settings"})]})}),(0,i.jsx)(fn,{value:"flights",label:(0,i.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(I.Z,{}),(0,i.jsx)(mn,{children:"Flights"})]})}),(0,i.jsx)(fn,{value:"starting_order",label:(0,i.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(R.Z,{}),(0,i.jsx)(mn,{children:"Starting Order"})]})}),(0,i.jsx)(fn,{value:"results",label:(0,i.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(C.Z,{}),(0,i.jsx)(mn,{children:"Results"})]})})]}),(0,i.jsx)(m.Z,{sx:{p:0},value:"pilots",children:(0,i.jsx)(B.Z,{pilots:Q.pilots,allPilots:q.pilots,update:function(n){return pn(n)}})}),(0,i.jsx)(m.Z,{sx:{p:0},value:"teams",children:(0,i.jsx)(M.Z,{teams:Q.teams,allTeams:q.teams,update:function(n){return vn(n)}})}),(0,i.jsx)(m.Z,{sx:{p:0},value:"judges",children:(0,i.jsx)(F.Z,{judges:Q.judges,allJudges:q.judges,update:function(n){return gn(n)}})}),(0,i.jsx)(m.Z,{sx:{p:0},value:"repeatable_tricks",children:(0,i.jsx)(Y.Z,{tricks:Q.repeatable_tricks,allTricks:dn,update:function(n){return yn(n)}})}),(0,i.jsx)(m.Z,{sx:{p:0},value:"settings",children:(0,i.jsx)(W.Z,{config:Q.config,update:function(n){return kn(n)},type:q.type})}),(0,i.jsx)(m.Z,{sx:{p:0},value:"flights",children:(0,i.jsx)(hn,{comp:q,run:Q,rid:t})}),(0,i.jsx)(m.Z,{sx:{p:0},value:"starting_order",children:(0,i.jsx)(A.Z,{children:(0,i.jsx)(L.Z,{sx:{minWidth:750},children:(0,i.jsx)(N.Z,{children:Q.pilots.sort((function(n,e){return e.rank-n.rank})).map((function(n,e){return(0,i.jsxs)(E.Z,{children:[(0,i.jsxs)(z.Z,{children:["#",e+1]}),(0,i.jsx)(z.Z,{children:n.name})]},"pilot-{i}")}))})})})}),(0,i.jsx)(m.Z,{sx:{p:0},value:"results",children:(0,i.jsx)(U,{code:r,rid:t})})]})})})]}):""}}},function(n){n.O(0,[571,885,808,698,109,725,404,738,335,595,774,888,179],(function(){return e=454,n(n.s=e);var e}));var e=n.O();_N_E=e}]);