(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6307:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(4938)),o=n(5893),s=(0,a.default)((0,o.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.Z=s},8445:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(3366),a=n(7462),o=n(7294),s=n(6010),i=n(7192),c=n(5861),l=n(1657),u=n(1496),d=n(8979);function p(e){return(0,d.Z)("MuiCardHeader",e)}var h=(0,n(6087).Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),f=n(5893);const v=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],m=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,a.Z)({[`& .${h.title}`]:t.title,[`& .${h.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),x=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),y=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),b=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"});var Z=o.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:u,className:d,component:h="div",disableTypography:Z=!1,subheader:w,subheaderTypographyProps:g,title:j,titleTypographyProps:P}=n,k=(0,r.Z)(n,v),_=(0,a.Z)({},n,{component:h,disableTypography:Z}),S=(e=>{const{classes:t}=e;return(0,i.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,t)})(_);let N=j;null==N||N.type===c.Z||Z||(N=(0,f.jsx)(c.Z,(0,a.Z)({variant:u?"body2":"h5",className:S.title,component:"span",display:"block"},P,{children:N})));let T=w;return null==T||T.type===c.Z||Z||(T=(0,f.jsx)(c.Z,(0,a.Z)({variant:u?"body2":"body1",className:S.subheader,color:"text.secondary",component:"span",display:"block"},g,{children:T}))),(0,f.jsxs)(m,(0,a.Z)({className:(0,s.Z)(S.root,d),as:h,ref:t,ownerState:_},k,{children:[u&&(0,f.jsx)(x,{className:S.avatar,ownerState:_,children:u}),(0,f.jsxs)(b,{className:S.content,ownerState:_,children:[N,T]}),o&&(0,f.jsx)(y,{className:S.action,ownerState:_,children:o})]}))}))},7156:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(510)}])},510:function(e,t,n){"use strict";n.r(t);var r=n(8520),a=n.n(r),o=n(5893),s=n(7294),i=(n(1664),n(6886)),c=n(3321),l=n(5861),u=n(9964),d=n(6242),p=n(8445),h=n(4267),f=n(2474),v=n(6307),m=n(5148),x=n(9233);function y(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(l){return void n(l)}i.done?t(c):Promise.resolve(c).then(r,a)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"600px",bgcolor:"background.paper",boxShadow:24,p:4};t.default=function(){var e=b((0,m.z)(),4),t=e[0],n=(e[1],e[2],e[3]);(0,s.useEffect)((function(){}),[]);var r,w=(r=a().mark((function e(r){var o,s,i,c,l,u,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),o=new FormData(r.target),(s=new URLSearchParams(l)).append("grand__type","password"),s.append("username",o.get("username")),s.append("password",o.get("password")),e.t0=b,e.next=9,(0,x.X)("/auth/login",{method:"POST",body:s,expect_json:!0});case 9:if(e.t1=e.sent,i=(0,e.t0)(e.t1,3),c=i[0],l=i[1],i[2],!c){e.next=17;break}return n("Error while authenticate: ".concat(c)),e.abrupt("return");case 17:if(l.access_token){e.next=20;break}return n("No access token received :-("),e.abrupt("return");case 20:t("Authentication successfull",o.get("username")),localStorage.setItem("token",l.access_token),u=new URLSearchParams(window.location.search),d=u.get("returnTo"),window.location=d||"".concat("","/");case 25:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function s(e){y(o,n,a,s,i,"next",e)}function i(e){y(o,n,a,s,i,"throw",e)}s(void 0)}))});return(0,o.jsx)(i.ZP,{container:!0,spacing:6,children:(0,o.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,o.jsx)(l.Z,{variant:"h5",children:"Login"}),(0,o.jsx)(u.Z,{open:!0,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,o.jsx)(d.Z,{sx:Z,children:(0,o.jsxs)("form",{onSubmit:w,children:[(0,o.jsx)(p.Z,{title:"Login",titleTypographyProps:{variant:"h6"}}),(0,o.jsx)(h.Z,{children:(0,o.jsxs)(i.ZP,{container:!0,spacing:5,children:[(0,o.jsx)(i.ZP,{item:!0,xs:12,children:(0,o.jsx)(f.Z,{fullWidth:!0,name:"username",label:"Username",placeholder:"Username"})}),(0,o.jsx)(i.ZP,{item:!0,xs:12,children:(0,o.jsx)(f.Z,{fullWidth:!0,type:"password",name:"password",label:"Password",placeholder:"Password"})}),(0,o.jsx)(i.ZP,{item:!0,xs:12,children:(0,o.jsx)(c.Z,{type:"submit",variant:"contained",endIcon:(0,o.jsx)(v.Z,{}),children:"Login"})})]})})]})})})]})})}},5148:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});var r=n(896),a=function(e){var t=(0,r.Ds)(),n=t.enqueueSnackbar,a=t.closeSnackbar,o=function(e,t){var r=n(e,{variant:t,onClick:function(){return a(r)}})};return[function(e){o(e,"success")},function(e){o(e,"info")},function(e){o(e,"warning")},function(e){o(e,"error")}]}}},function(e){e.O(0,[824,774,888,179],(function(){return t=7156,e(e.s=t);var t}));var t=e.O();_N_E=t}]);