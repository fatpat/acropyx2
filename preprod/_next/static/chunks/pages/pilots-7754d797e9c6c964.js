(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[927],{3555:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pilots",function(){return e(6388)}])},6388:function(t,n,e){"use strict";e.r(n);var r=e(8520),i=e.n(r),a=e(5893),o=e(7294),c=(e(1163),e(4713)),s=e(6886),u=e(5861),l=e(3321),d=e(666),f=e(2474),p=e(1458),x=e(7357),h=e(7497),v=e(5148),m=e(9233);function j(t,n,e,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void e(u)}c.done?n(s):Promise.resolve(s).then(r,i)}function Z(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var a=t.apply(n,e);function o(t){j(a,r,i,o,c,"next",t)}function c(t){j(a,r,i,o,c,"throw",t)}o(void 0)}))}}function g(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,i=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.default=(0,c.tl)((function(){var t=g((0,v.z)(),4),n=t[0],e=t[1],r=(t[2],t[3]),j=(0,c.aF)(),w=(j.user,j.authError,j.authIisLoading,(0,o.useState)([])),b=w[0],y=w[1],k=(0,o.useState)([]),P=k[0],_=k[1],C=(0,o.useState)(!1),E=C[0],I=C[1],S=Z(i().mark((function t(){var n,e,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I("Loading pilots list"),t.t0=g,t.next=4,(0,m.X)("/pilots/",{expect_json:!0});case 4:if(t.t1=t.sent,n=(0,t.t0)(t.t1,3),e=n[0],a=n[1],n[2],!e){t.next=14;break}return y(!1),_(!1),r("Error while retrieving pilots list: ".concat(e)),t.abrupt("return");case 14:y(a),_(a),I(!1);case 17:case"end":return t.stop()}}),t)}))),N=function(t){event.preventDefault(),D(parseInt(document.getElementById("civlid").value))},D=Z(i().mark((function t(e){var a,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<1||isNaN(e))){t.next=2;break}return t.abrupt("return");case 2:return I("Updating pilot #".concat(e)),t.t0=g,t.next=6,(0,m.X)("/pilots/".concat(e),{method:"POST",expected_status:201});case 6:t.t1=t.sent,a=(0,t.t0)(t.t1,3),o=a[0],a[1],a[2],o?r("Error updating Pilot #".concat(e,": ").concat(o)):n("Pilot #".concat(e," successfully updated")),S();case 13:case"end":return t.stop()}}),t)}))),A=Z(i().mark((function t(){var e,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm("Are you sure to update all pilots ?")){t.next=2;break}return t.abrupt("return");case 2:return I("Updating all pilots"),t.t0=g,t.next=6,(0,m.X)("/pilots/update_all",{method:"POST",expected_status:201});case 6:t.t1=t.sent,e=(0,t.t0)(t.t1,3),a=e[0],e[1],e[2],a?r("Error updating all pilots: ".concat(a)):n("Pilots successfully updated"),S();case 13:case"end":return t.stop()}}),t)}))),z=Z(i().mark((function t(n){var r,a,o,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target.value,!((a=parseInt(r))>0)){t.next=5;break}return y(P.filter((function(t){return t.civlid==a}))),t.abrupt("return");case 5:r=r.normalize("NFD").replace(/[\u0300-\u036f]/g,""),o=new RegExp(r,"i"),c=P.filter((function(t){return t.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(o)})),y(c),e("".concat(c.length," pilots filtered over ").concat(P.length));case 10:case"end":return t.stop()}}),t)})));return(0,o.useEffect)((function(){S()}),[]),E?(0,a.jsxs)(x.Z,{sx:{width:"100%",textAlign:"center"},children:[(0,a.jsx)(p.Z,{}),E]}):b?(0,a.jsxs)(s.ZP,{container:!0,spacing:6,children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,sx:{paddingBottom:4},children:(0,a.jsxs)(u.Z,{variant:"h5",children:["Pilots",(0,a.jsx)(d.Z,{onClick:S})]})}),(0,a.jsx)(s.ZP,{item:!0,xs:4,sm:4,children:(0,a.jsx)(f.Z,{fullWidth:!0,id:"outlined-basic",label:"Search pilot",variant:"outlined",onChange:z})}),(0,a.jsx)(s.ZP,{item:!0,xs:2,sm:2,children:(0,a.jsx)("form",{onSubmit:N,children:(0,a.jsx)(f.Z,{id:"civlid",label:"CIVL ID"})})}),(0,a.jsx)(s.ZP,{item:!0,xs:2,sm:2,children:(0,a.jsx)("form",{onSubmit:N,children:(0,a.jsx)(l.Z,{type:"submit",children:"Add or Update pilot"})})}),(0,a.jsx)(s.ZP,{item:!0,xs:4,sm:4,container:!0,direction:"row",justifyContent:"flex-end",children:(0,a.jsx)(l.Z,{variant:"outlined",startIcon:(0,a.jsx)(d.Z,{}),onClick:A,children:"Synchronize from CIVL"})}),b.map((function(t){return(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(h.Z,{pilot:t,updatePilot:D})},t.civlid)}))]}):(0,a.jsx)("p",{children:"No data"})}))},5148:function(t,n,e){"use strict";e.d(n,{z:function(){return i}});var r=e(896),i=function(t){var n=(0,r.Ds)(),e=n.enqueueSnackbar,i=n.closeSnackbar,a=function(t,n){var r=e(t,{variant:n,onClick:function(){return i(r)}})};return[function(t){a(t,"success")},function(t){a(t,"info")},function(t){a(t,"warning")},function(t){a(t,"error")}]}},7497:function(t,n,e){"use strict";var r=e(5893),i=e(7357),a=e(6242),o=e(3321),c=e(122),s=e(9661),u=e(3965),l=e(5861),d=e(4267),f=e(9318),p=e(693);n.Z=function(t){var n=t.pilot;return(0,r.jsxs)(a.Z,{sx:{position:"relative"},children:[(0,r.jsx)(u.Z,{sx:{height:"12.625rem"},image:n.background_picture}),(0,r.jsx)(s.Z,{alt:n.name,src:n.photo,sx:{width:150,height:150,left:"1.313rem",top:"4.5rem",position:"absolute",border:function(t){return"0.25rem solid ".concat(t.palette.common.white)}}}),(0,r.jsx)(d.Z,{children:(0,r.jsxs)(i.Z,{sx:{mt:5.75,mb:8.75,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(i.Z,{sx:{mr:2,mb:1,display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(l.Z,{variant:"h6",children:[(0,r.jsx)(c.Z,{href:n.link,target:"_blank",rel:"noopener noreferrer",children:n.name})," ",(0,r.jsx)(f.Z,{countryCode:p.convertAlphaCode(n.country),svg:!0,title:p.getCountry(n.country)})]}),(0,r.jsxs)(l.Z,{variant:"caption",children:["CIVL ID: ",n.civlid]}),(0,r.jsxs)(l.Z,{variant:"caption",children:["Rank: #",n.rank]})]}),(0,r.jsx)(o.Z,{variant:"contained",onClick:function(){return t.updatePilot(n.civlid)},children:"Update pilot"})]})})]})}}},function(t){t.O(0,[824,698,774,888,179],(function(){return n=3555,t(t.s=n);var n}));var n=t.O();_N_E=n}]);