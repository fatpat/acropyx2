(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{6540:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(4938)),o=n(5893),i=(0,a.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=i},2026:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(3366),a=n(7462),o=n(7294),i=n(6010),s=n(4780),c=n(7074),l=n(8884),u=n(4867);function d(e){return(0,u.Z)("MuiCardActions",e)}(0,n(1588).Z)("MuiCardActions",["root","spacing"]);var f=n(5893);const p=["disableSpacing","className"],h=(0,c.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,a.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})));var v=o.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:o=!1,className:c}=n,u=(0,r.Z)(n,p),v=(0,a.Z)({},n,{disableSpacing:o}),m=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,s.Z)(r,d,t)})(v);return(0,f.jsx)(h,(0,a.Z)({className:(0,i.Z)(m.root,c),ownerState:v,ref:t},u))}))},9742:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(3366),a=n(7462),o=n(7294),i=n(6010),s=n(4780),c=n(9630),l=n(8884),u=n(7074),d=n(4867);function f(e){return(0,d.Z)("MuiCardHeader",e)}var p=(0,n(1588).Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),h=n(5893);const v=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],m=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,a.Z)({[`& .${p.title}`]:t.title,[`& .${p.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),x=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),g=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),y=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"});var b=o.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:u,className:d,component:p="div",disableTypography:b=!1,subheader:Z,subheaderTypographyProps:w,title:j,titleTypographyProps:S}=n,C=(0,r.Z)(n,v),P=(0,a.Z)({},n,{component:p,disableTypography:b}),N=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},f,t)})(P);let _=j;null==_||_.type===c.Z||b||(_=(0,h.jsx)(c.Z,(0,a.Z)({variant:u?"body2":"h5",className:N.title,component:"span",display:"block"},S,{children:_})));let k=Z;return null==k||k.type===c.Z||b||(k=(0,h.jsx)(c.Z,(0,a.Z)({variant:u?"body2":"body1",className:N.subheader,color:"text.secondary",component:"span",display:"block"},w,{children:k}))),(0,h.jsxs)(m,(0,a.Z)({className:(0,i.Z)(N.root,d),as:p,ref:t,ownerState:P},C,{children:[u&&(0,h.jsx)(x,{className:N.avatar,ownerState:P,children:u}),(0,h.jsxs)(y,{className:N.content,ownerState:P,children:[_,k]}),o&&(0,h.jsx)(g,{className:N.action,ownerState:P,children:o})]}))}))},4257:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seasons",function(){return n(9760)}])},3521:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(5893),a=n(7294),o=n(7971),i=n(3884),s=n(2359),c=n(1812);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e){var t,n=u(a.useState(e.default),2),d=n[0],f=n[1];return(0,r.jsx)(s._,{dateAdapter:i.H,children:(0,r.jsx)(c.M,{views:null!==(t=e.views)&&void 0!==t?t:["year","day"],label:e.label,value:d,onChange:function(t){t.toJSON=function(){return"".concat(String(this.getFullYear()),"-").concat(String(this.getMonth()+1).padStart(2,"0"),"-").concat(String(this.getDate()).padStart(2,"0"))},f(t),e.onChange&&e.onChange(t)},renderInput:function(e){return(0,r.jsx)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({},e))}})})}},1194:function(e,t){"use strict";t.Z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"600px",bgcolor:"background.paper",boxShadow:24,p:4}},9760:function(e,t,n){"use strict";n.r(t);var r=n(8520),a=n.n(r),o=n(5893),i=n(7294),s=(n(1163),n(4713)),c=n(9072),l=n(9630),u=n(5084),d=n(2096),f=n(1849),p=n(7971),h=n(6070),v=n(1953),m=n(9837),x=n(6540),g=n(9742),y=n(1359),b=n(2026),Z=n(4117),w=(n(7497),n(9780),n(5148)),j=n(9233),S=n(1194),C=n(3521);function P(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){P(o,r,a,i,s,"next",e)}function s(e){P(o,r,a,i,s,"throw",e)}i(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var k={year:(new Date).getFullYear()};t.default=function(){var e,t,n=_((0,w.z)(),4),r=(n[0],n[1]),P=(n[2],n[3]),T=(0,s.aF)(),M=(T.user,T.authError,T.authIisLoading,(0,i.useState)([])),O=M[0],A=M[1],E=(0,i.useState)([]),R=E[0],I=E[1],H=(0,i.useState)(!1),D=H[0],z=H[1],F=(0,i.useState)(!1),L=F[0],X=F[1],Y=(0,i.useState)(""),V=Y[0],W=Y[1],B=(0,i.useState)(k),J=B[0],$=B[1],K=N(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.t0=_,e.next=4,(0,j.Xv)("/seasons",{expect_json:!0});case 4:if(e.t1=e.sent,t=(0,e.t0)(e.t1,3),n=t[0],r=t[1],t[2],!n){e.next=14;break}return A(!1),I(!1),P("Error while retrieving competitions list: ".concat(n)),e.abrupt("return");case 14:r=r.map((function(e){var t;return e.delete="delete",e.update="update",e.number_of_competitions=(null!==(t=e.competitions)&&void 0!==t?t:[]).length,e.id=e._id,e})),A(r),I(r),z(!1);case 18:case"end":return e.stop()}}),e)}))),q=N(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.t0=_,e.next=4,(0,j.Xv)("/seasons/new",{expected_status:201,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});case 4:if(e.t1=e.sent,n=(0,e.t0)(e.t1,3),r=n[0],n[1],n[2],!r){e.next=12;break}return P("error while creating new season: ".concat(r)),e.abrupt("return");case 12:X(!1),K();case 14:case"end":return e.stop()}}),e)}))),G=N(a().mark((function e(t){var n,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(n=t.target.value).normalize("NFD").replace(/[\u0300-\u036f]/g,""),o=new RegExp(n,"i"),i=R.filter((function(e){return e.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(o)})),A(i),r("".concat(i.length," competitions filtered over ").concat(R.length));case 6:case"end":return e.stop()}}),e)})));return(0,i.useEffect)((function(){K()}),[]),D?(0,o.jsxs)(v.Z,{sx:{width:"100%",textAlign:"center"},children:[(0,o.jsx)(h.Z,{}),"Loading"]}):O?(0,o.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,o.jsx)(c.ZP,{item:!0,xs:12,children:(0,o.jsxs)(l.Z,{variant:"h5",children:["Seasons",(0,o.jsx)(f.Z,{onClick:K})]})}),(0,o.jsx)(c.ZP,{item:!0,xs:4,sm:4,children:(0,o.jsx)(p.Z,{fullWidth:!0,id:"outlined-basic",label:"Search seasons",variant:"outlined",onChange:G})}),(0,o.jsxs)(c.ZP,{item:!0,xs:8,sm:8,container:!0,children:[(0,o.jsx)(u.Z,{variant:"contained",onClick:function(){W("New Season"),$(k),X(!0)},startIcon:(0,o.jsx)(x.Z,{}),children:"New Season"}),(0,o.jsx)(d.Z,{open:L,onClose:function(){return X(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,o.jsx)(m.Z,{sx:S.Z,children:(0,o.jsxs)("form",{onSubmit:q,children:[(0,o.jsx)(g.Z,{title:V,titleTypographyProps:{variant:"h6"}}),(0,o.jsx)(y.Z,{children:(0,o.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,o.jsx)(c.ZP,{item:!0,xs:12,children:(0,o.jsx)(p.Z,{fullWidth:!0,name:"name",label:"Name",placeholder:"Season name",defaultValue:null!==(e=J.name)&&void 0!==e?e:"",onChange:function(e){J.name=e.target.value,$(J)}})}),(0,o.jsx)(c.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,name:"code",label:"code",placeholder:"Code",defaultValue:null!==(t=J.code)&&void 0!==t?t:"",onChange:function(e){J.code=e.target.value,$(J)}})}),(0,o.jsx)(c.ZP,{item:!0,xs:6,children:(0,o.jsx)(C.Z,{views:["year"],label:"Year",default:new Date(J.year,1,1),onChange:function(e){J.year=parseInt(e.getFullYear()),$(J)}})})]})}),(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(u.Z,{size:"large",type:"submit",sx:{mr:2},variant:"contained",children:"Submit"}),(0,o.jsx)(u.Z,{size:"large",color:"secondary",variant:"outlined",onClick:function(){return X(!1)},children:"Cancel"})]})]})})})]}),(0,o.jsx)(c.ZP,{item:!0,xs:12,children:(0,o.jsx)(m.Z,{children:(0,o.jsx)(Z.Z,{rows:O,headCells:[{id:"name",type:"LINK",href:function(e,t){return"/seasons/show?sid=".concat(t.code)}},{id:"code"},{id:"type"},{id:"year"},{id:"number_of_competitions"},{id:"number_of_pilots"},{id:"number_of_teams"}],orderById:"year",defaultOrder:"desc",pagination:!1})})})]}):(P("Empty or invalid data"),"")}}},function(e){e.O(0,[292,177,329,49,335,774,888,179],(function(){return t=4257,e(e.s=t);var t}));var t=e.O();_N_E=t}]);